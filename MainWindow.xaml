<hc:Window
  x:Class="KeyboardLanguageIndicator.MainWindow"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:hc="https://handyorg.github.io/handycontrol"
  Title="Keyboard Language Indicator - Settings"
  Height="700"
  Width="600"
  WindowStartupLocation="CenterScreen"
  Background="{DynamicResource RegionBrush}"
  Closing="Window_Closing"
  StateChanged="Window_StateChanged"
  ResizeMode="CanMinimize"
>
  <hc:Window.Resources>
    <ContextMenu x:Key="TrayMenu">
      <MenuItem Header="Settings" Click="TrayIcon_DoubleClick" />
      <Separator />
      <MenuItem Header="Exit" Click="Exit_Click" />
    </ContextMenu>
    <Style x:Key="SliderRowStyle" TargetType="Grid">
      <Setter Property="Margin" Value="0,0,0,15" />
    </Style>
  </hc:Window.Resources>
  <Grid Margin="15">
    <Grid.RowDefinitions>
      <RowDefinition Height="*" />
      <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>
    <TabControl Grid.Row="0" Style="{StaticResource TabControlBaseStyle}" Margin="0,0,0,10">
      <!-- General Settings Tab -->
      <TabItem>
        <TabItem.Header>
          <TextBlock Text="General" FontSize="14" Padding="10,5" />
        </TabItem.Header>
        <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="5">
          <StackPanel Margin="15,20,15,10">
            <!-- Enable/Disable Notifications -->
            <CheckBox
              x:Name="EnableNotificationsCheckBox"
              Content="Enable screen notifications"
              FontSize="14"
              FontWeight="SemiBold"
              Margin="0,0,0,10"
              Checked="Notifications_Changed"
              Unchecked="Notifications_Changed"
            />
            <TextBlock
              Text="Shows position-based notifications when switching keyboard languages."
              TextWrapping="Wrap"
              Margin="0,0,0,20"
              FontSize="12"
              Foreground="{DynamicResource SecondaryTextBrush}"
            />
            <Separator Margin="0,0,0,20" Background="{DynamicResource BorderBrush}" />

            <!-- Notification Settings Panel -->
            <StackPanel x:Name="NotificationSettingsPanel">
              <!-- Monitor Display Options -->
              <TextBlock
                Text="Display Options"
                Margin="0,0,0,15"
                FontWeight="Bold"
                FontSize="15"
                Foreground="{DynamicResource PrimaryTextBrush}"
              />
              <RadioButton
                x:Name="SingleMonitorRadio"
                Content="Show on specific monitor"
                GroupName="MonitorMode"
                Margin="0,0,5,10"
                Checked="MonitorMode_Changed"
                HorizontalAlignment="Left"
              />
              <hc:ComboBox
                x:Name="MonitorComboBox"
                Margin="20,0,0,15"
                Style="{StaticResource ComboBoxExtend}"
                SelectionChanged="Settings_Changed"
              />
              <RadioButton
                x:Name="CursorMonitorRadio"
                Content="Show on monitor where cursor is located"
                GroupName="MonitorMode"
                Margin="0,0,5,10"
                Checked="MonitorMode_Changed"
                HorizontalAlignment="Left"
              />
              <RadioButton
                x:Name="AllMonitorsRadio"
                Content="Show on all monitors"
                GroupName="MonitorMode"
                Margin="0,0,5,20"
                Checked="MonitorMode_Changed"
                HorizontalAlignment="Left"
              />
              <Separator Margin="0,0,0,25" Background="{DynamicResource BorderBrush}" />
              <!-- Position Selector -->
              <hc:ComboBox
                x:Name="PositionComboBox"
                hc:TitleElement.Title="Notification Position"
                hc:TitleElement.TitlePlacement="Top"
                Style="{StaticResource ComboBoxExtend}"
                Margin="0,0,0,25"
                SelectionChanged="Settings_Changed"
              >
                <ComboBoxItem Content="Top Right" Tag="TopRight" />
                <ComboBoxItem Content="Top Left" Tag="TopLeft" />
                <ComboBoxItem Content="Top Center" Tag="TopCenter" />
                <ComboBoxItem Content="Bottom Right" Tag="BottomRight" />
                <ComboBoxItem Content="Bottom Left" Tag="BottomLeft" />
                <ComboBoxItem Content="Bottom Center" Tag="BottomCenter" />
                <ComboBoxItem Content="Center" Tag="Center" />
              </hc:ComboBox>
              <!-- Duration Slider -->
              <Grid Style="{StaticResource SliderRowStyle}">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="95" />
                  <ColumnDefinition Width="*" />
                  <ColumnDefinition Width="70" />
                </Grid.ColumnDefinitions>
                <TextBlock Text="Duration" VerticalAlignment="Center" FontWeight="Medium" />
                <Slider
                  x:Name="DurationSlider"
                  Grid.Column="1"
                  Minimum="0.5"
                  Maximum="10"
                  TickFrequency="0.5"
                  IsSnapToTickEnabled="True"
                  ValueChanged="Settings_Changed"
                  Margin="10,0"
                />
                <TextBlock
                  Text="{Binding Value, ElementName=DurationSlider, StringFormat={}{0:N1}s}"
                  Grid.Column="2"
                  VerticalAlignment="Center"
                  HorizontalAlignment="Right"
                  Foreground="{DynamicResource PrimaryBrush}"
                  FontWeight="SemiBold"
                />
              </Grid>
              <!-- Persistent Mode Checkbox -->
              <CheckBox
                x:Name="PersistentCheckBox"
                Content="Persistent Mode (Dismiss with Ctrl+Q)"
                Margin="0,5,0,20"
                Checked="Persistent_Changed"
                Unchecked="Persistent_Changed"
              />
              <!-- Font Size Slider -->
              <Grid Style="{StaticResource SliderRowStyle}">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="95" />
                  <ColumnDefinition Width="*" />
                  <ColumnDefinition Width="70" />
                </Grid.ColumnDefinitions>
                <TextBlock Text="Font Size" VerticalAlignment="Center" FontWeight="Medium" />
                <Slider
                  x:Name="FontSizeSlider"
                  Grid.Column="1"
                  Minimum="12"
                  Maximum="48"
                  TickFrequency="1"
                  IsSnapToTickEnabled="True"
                  ValueChanged="Settings_Changed"
                  Margin="10,0"
                />
                <TextBlock
                  Text="{Binding Value, ElementName=FontSizeSlider, StringFormat={}{0:F0}}"
                  Grid.Column="2"
                  VerticalAlignment="Center"
                  HorizontalAlignment="Right"
                  Foreground="{DynamicResource PrimaryBrush}"
                  FontWeight="SemiBold"
                />
              </Grid>
              <!-- Opacity Slider -->
              <Grid Style="{StaticResource SliderRowStyle}">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="95" />
                  <ColumnDefinition Width="*" />
                  <ColumnDefinition Width="70" />
                </Grid.ColumnDefinitions>
                <TextBlock Text="Opacity" VerticalAlignment="Center" FontWeight="Medium" />
                <Slider
                  x:Name="OpacitySlider"
                  Grid.Column="1"
                  Minimum="0.1"
                  Maximum="1"
                  TickFrequency="0.05"
                  IsSnapToTickEnabled="True"
                  ValueChanged="Settings_Changed"
                  Margin="10,0"
                />
                <TextBlock
                  Text="{Binding Value, ElementName=OpacitySlider, StringFormat={}{0:P0}}"
                  Grid.Column="2"
                  VerticalAlignment="Center"
                  HorizontalAlignment="Right"
                  Foreground="{DynamicResource PrimaryBrush}"
                  FontWeight="SemiBold"
                />
              </Grid>
            </StackPanel>
          </StackPanel>
        </ScrollViewer>
      </TabItem>
      <!-- Cursor Follower Tab -->
      <TabItem>
        <TabItem.Header>
          <TextBlock Text="Cursor Follower" FontSize="14" Padding="10,5" />
        </TabItem.Header>
        <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="5">
          <StackPanel Margin="15,20,15,10">
            <CheckBox
              x:Name="EnableCursorFollowerCheckBox"
              Content="Enable Cursor Follower"
              FontSize="14"
              FontWeight="SemiBold"
              Margin="0,0,0,10"
              Checked="CursorFollower_Changed"
              Unchecked="CursorFollower_Changed"
            />
            <TextBlock
              Text="Shows a small indicator near the cursor displaying the current keyboard language."
              TextWrapping="Wrap"
              Margin="0,0,0,20"
              FontSize="12"
              Foreground="{DynamicResource SecondaryTextBrush}"
            />
            <Separator Margin="0,0,0,20" Background="{DynamicResource BorderBrush}" />
            <!-- Cursor Follower Settings (Enabled when checkbox is checked) -->
            <StackPanel x:Name="CursorFollowerSettingsPanel">
              <CheckBox
                x:Name="CursorFollowerPersistentCheckBox"
                Content="Always show (persistent mode)"
                Margin="0,0,0,15"
                Checked="CursorFollower_Changed"
                Unchecked="CursorFollower_Changed"
              />
              <!-- Duration (only shown when not persistent) -->
              <StackPanel x:Name="CursorFollowerDurationPanel">
                <Grid Style="{StaticResource SliderRowStyle}">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="120" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="70" />
                  </Grid.ColumnDefinitions>
                  <TextBlock
                    Text="Display Duration"
                    VerticalAlignment="Center"
                    FontWeight="Medium"
                  />
                  <Slider
                    x:Name="CursorFollowerDurationSlider"
                    Grid.Column="1"
                    Minimum="0.5"
                    Maximum="10"
                    TickFrequency="0.5"
                    IsSnapToTickEnabled="True"
                    ValueChanged="CursorFollower_Changed"
                    Margin="10,0"
                  />
                  <TextBlock
                    Text="{Binding Value, ElementName=CursorFollowerDurationSlider, StringFormat={}{0:N1}s}"
                    Grid.Column="2"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Right"
                    Foreground="{DynamicResource PrimaryBrush}"
                    FontWeight="SemiBold"
                  />
                </Grid>
              </StackPanel>
              <!-- Opacity -->
              <Grid Style="{StaticResource SliderRowStyle}">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="120" />
                  <ColumnDefinition Width="*" />
                  <ColumnDefinition Width="70" />
                </Grid.ColumnDefinitions>
                <TextBlock Text="Opacity" VerticalAlignment="Center" FontWeight="Medium" />
                <Slider
                  x:Name="CursorFollowerOpacitySlider"
                  Grid.Column="1"
                  Minimum="0.3"
                  Maximum="1"
                  TickFrequency="0.05"
                  IsSnapToTickEnabled="True"
                  ValueChanged="CursorFollower_Changed"
                  Margin="10,0"
                />
                <TextBlock
                  Text="{Binding Value, ElementName=CursorFollowerOpacitySlider, StringFormat={}{0:P0}}"
                  Grid.Column="2"
                  VerticalAlignment="Center"
                  HorizontalAlignment="Right"
                  Foreground="{DynamicResource PrimaryBrush}"
                  FontWeight="SemiBold"
                />
              </Grid>
              <!-- Offset X -->
              <Grid Style="{StaticResource SliderRowStyle}">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="120" />
                  <ColumnDefinition Width="*" />
                  <ColumnDefinition Width="70" />
                </Grid.ColumnDefinitions>
                <TextBlock
                  Text="Horizontal Offset"
                  VerticalAlignment="Center"
                  FontWeight="Medium"
                />
                <Slider
                  x:Name="CursorFollowerOffsetXSlider"
                  Grid.Column="1"
                  Minimum="0"
                  Maximum="50"
                  TickFrequency="1"
                  IsSnapToTickEnabled="True"
                  ValueChanged="CursorFollower_Changed"
                  Margin="10,0"
                />
                <TextBlock
                  Text="{Binding Value, ElementName=CursorFollowerOffsetXSlider, StringFormat={}{0:F0}px}"
                  Grid.Column="2"
                  VerticalAlignment="Center"
                  HorizontalAlignment="Right"
                  Foreground="{DynamicResource PrimaryBrush}"
                  FontWeight="SemiBold"
                />
              </Grid>
              <!-- Offset Y -->
              <Grid Style="{StaticResource SliderRowStyle}">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="120" />
                  <ColumnDefinition Width="*" />
                  <ColumnDefinition Width="70" />
                </Grid.ColumnDefinitions>
                <TextBlock Text="Vertical Offset" VerticalAlignment="Center" FontWeight="Medium" />
                <Slider
                  x:Name="CursorFollowerOffsetYSlider"
                  Grid.Column="1"
                  Minimum="0"
                  Maximum="50"
                  TickFrequency="1"
                  IsSnapToTickEnabled="True"
                  ValueChanged="CursorFollower_Changed"
                  Margin="10,0"
                />
                <TextBlock
                  Text="{Binding Value, ElementName=CursorFollowerOffsetYSlider, StringFormat={}{0:F0}px}"
                  Grid.Column="2"
                  VerticalAlignment="Center"
                  HorizontalAlignment="Right"
                  Foreground="{DynamicResource PrimaryBrush}"
                  FontWeight="SemiBold"
                />
              </Grid>
            </StackPanel>
            <Border
              Margin="0,20,0,0"
              Padding="12"
              Background="{DynamicResource InfoBrush}"
              CornerRadius="4"
              BorderThickness="1"
              BorderBrush="{DynamicResource BorderBrush}"
            >
              <StackPanel>
                <TextBlock Text="Note" FontWeight="Bold" FontSize="13" Margin="0,0,0,5" />
                <TextBlock
                  Text="The cursor follower works independently from the main notification and can be enabled simultaneously."
                  FontSize="12"
                  TextWrapping="Wrap"
                  Foreground="{DynamicResource SecondaryTextBrush}"
                />
              </StackPanel>
            </Border>
          </StackPanel>
        </ScrollViewer>
      </TabItem>
      <!-- Appearance Tab -->
      <TabItem>
        <TabItem.Header>
          <TextBlock Text="Appearance" FontSize="14" Padding="10,5" />
        </TabItem.Header>
        <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="5">
          <StackPanel Margin="15,20,15,10">
            <!-- Application Theme -->
            <TextBlock
              Text="Application Theme"
              Margin="0,0,0,15"
              FontWeight="Bold"
              FontSize="15"
              Foreground="{DynamicResource PrimaryTextBrush}"
            />
            <CheckBox
              x:Name="DarkModeCheckBox"
              Content="Enable Dark Mode"
              FontSize="13"
              Margin="0,0,0,20"
              Checked="Theme_Changed"
              Unchecked="Theme_Changed"
            />
            <Separator Margin="0,0,0,25" Background="{DynamicResource BorderBrush}" />
            <!-- Notification Colors -->
            <TextBlock
              Text="Notification Colors"
              Margin="0,0,0,15"
              FontWeight="Bold"
              FontSize="15"
              Foreground="{DynamicResource PrimaryTextBrush}"
            />
            <TextBlock
              Text="Set default colors or configure custom colors for specific languages. Changes preview immediately."
              TextWrapping="Wrap"
              Margin="0,0,0,20"
              FontSize="12"
              Foreground="{DynamicResource SecondaryTextBrush}"
            />
            <!-- Color Pickers -->
            <Grid Margin="0,0,0,20">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
              </Grid.ColumnDefinitions>
              <!-- Background Color Picker -->
              <StackPanel Grid.Column="0" Margin="0,0,10,0">
                <TextBlock
                  Text="Background Color"
                  Margin="0,0,0,10"
                  FontSize="13"
                  FontWeight="Medium"
                  Foreground="{DynamicResource SecondaryTextBrush}"
                />
                <hc:ColorPicker
                  x:Name="BgColorPicker"
                  Width="250"
                  HorizontalAlignment="Left"
                  hc:InfoElement.Placeholder="Select Color"
                />
              </StackPanel>
              <!-- Text Color Picker -->
              <StackPanel Grid.Column="1" Margin="10,0,0,0">
                <TextBlock
                  Text="Text Color"
                  Margin="0,0,0,10"
                  FontSize="13"
                  FontWeight="Medium"
                  Foreground="{DynamicResource SecondaryTextBrush}"
                />
                <hc:ColorPicker
                  x:Name="TextColorPicker"
                  Width="250"
                  HorizontalAlignment="Left"
                  hc:InfoElement.Placeholder="Select Color"
                />
              </StackPanel>
            </Grid>
            <Button
              x:Name="SaveDefaultColorsButton"
              Content="Set as Default Colors"
              Click="SaveDefaultColors_Click"
              Style="{StaticResource ButtonPrimary}"
              HorizontalAlignment="Stretch"
              Margin="0,0,0,20"
              Padding="15,5"
            />
            <!-- Add Language Section -->
            <Border
              Padding="15"
              Background="{DynamicResource RegionBrush}"
              BorderBrush="{DynamicResource BorderBrush}"
              BorderThickness="1"
              CornerRadius="4"
              Margin="0,0,0,15"
            >
              <StackPanel>
                <TextBlock
                  Text="Language-Specific Colors"
                  FontWeight="SemiBold"
                  Margin="0,0,0,10"
                />
                <TextBlock
                  Text="Select a language, adjust the colors above, then add it to the list."
                  TextWrapping="Wrap"
                  Margin="0,0,0,15"
                  FontSize="12"
                  Foreground="{DynamicResource SecondaryTextBrush}"
                />
                <hc:ComboBox
                  x:Name="LanguageSelector"
                  Margin="0,0,0,15"
                  IsEditable="True"
                  hc:InfoElement.Placeholder="Select or type language"
                  hc:TitleElement.Title="Language"
                  hc:TitleElement.TitlePlacement="Top"
                  Style="{StaticResource ComboBoxExtend}"
                />
                <Button
                  Content="Add Language with Current Colors"
                  Click="AddLanguageConfig_Click"
                  Style="{DynamicResource ButtonPrimary}"
                  HorizontalAlignment="Stretch"
                />
              </StackPanel>
            </Border>
            <!-- Language List -->
            <TextBlock Text="Configured Languages" FontWeight="SemiBold" Margin="0,0,0,10" />
            <ListBox x:Name="LanguageConfigList" MinHeight="150" MaxHeight="300">
              <ListBox.ItemTemplate>
                <DataTemplate>
                  <Grid Margin="5">
                    <Grid.ColumnDefinitions>
                      <ColumnDefinition Width="150" />
                      <ColumnDefinition Width="*" />
                      <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <StackPanel>
                      <TextBlock Text="{Binding Name}" FontWeight="Bold" FontSize="14" />
                      <TextBlock
                        Text="{Binding Code}"
                        FontSize="11"
                        Foreground="{DynamicResource SecondaryTextBrush}"
                      />
                    </StackPanel>
                    <StackPanel
                      Grid.Column="1"
                      Orientation="Horizontal"
                      Margin="15,0,20,0"
                      VerticalAlignment="Center"
                    >
                      <Border
                        Width="30"
                        Height="20"
                        Background="{Binding BackgroundBrush}"
                        BorderBrush="Gray"
                        BorderThickness="1"
                        Margin="0,0,5,0"
                      />
                      <TextBlock
                        Text="BG"
                        VerticalAlignment="Center"
                        Margin="0,0,15,0"
                        FontSize="11"
                        Foreground="{DynamicResource SecondaryTextBrush}"
                      />
                      <Border
                        Width="30"
                        Height="20"
                        Background="{Binding TextBrush}"
                        BorderBrush="Gray"
                        BorderThickness="1"
                        Margin="0,0,5,0"
                      />
                      <TextBlock
                        Text="Text"
                        VerticalAlignment="Center"
                        Margin="0,0,20,0"
                        FontSize="11"
                        Foreground="{DynamicResource SecondaryTextBrush}"
                      />
                    </StackPanel>
                    <StackPanel Grid.Column="2" Orientation="Horizontal">
                      <Button
                        Content="Edit"
                        Click="EditLanguageConfig_Click"
                        Tag="{Binding Code}"
                        Style="{StaticResource ButtonPrimary}"
                        Padding="10,5"
                        Margin="0,0,8,0"
                      />
                      <Button
                        Content="Remove"
                        Click="RemoveLanguageConfig_Click"
                        Tag="{Binding Code}"
                        Style="{StaticResource ButtonDanger}"
                        Padding="10,5"
                      />
                    </StackPanel>
                  </Grid>
                </DataTemplate>
              </ListBox.ItemTemplate>
            </ListBox>
          </StackPanel>
        </ScrollViewer>
      </TabItem>
      <!-- Behavior Tab -->
      <TabItem>
        <TabItem.Header>
          <TextBlock Text="Behavior" FontSize="14" Padding="10,5" />
        </TabItem.Header>
        <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="5">
          <StackPanel Margin="15,20,15,10">
            <TextBlock
              Text="System Integration"
              Margin="0,0,0,15"
              FontWeight="Bold"
              FontSize="15"
              Foreground="{DynamicResource PrimaryTextBrush}"
            />
            <CheckBox
              x:Name="StartWithWindowsCheckBox"
              Content="Start automatically with Windows"
              Margin="0,0,0,12"
              FontSize="13"
              Checked="StartWithWindows_Changed"
              Unchecked="StartWithWindows_Changed"
            />
            <CheckBox
              x:Name="CheckForUpdatesCheckBox"
              Content="Check for updates automatically"
              Margin="0,0,0,12"
              FontSize="13"
              Checked="Settings_Changed"
              Unchecked="Settings_Changed"
            />
            <Button
              x:Name="CheckNowButton"
              Content="Check for Updates Now"
              Padding="15,5"
              Style="{StaticResource ButtonInfo}"
              Click="CheckForUpdates_Click"
            />
            <Separator Margin="0,10,0,20" Background="{DynamicResource BorderBrush}" />
            <TextBlock
              Text="Window Behavior"
              Margin="0,0,0,15"
              FontWeight="Bold"
              FontSize="15"
              Foreground="{DynamicResource PrimaryTextBrush}"
            />
            <CheckBox
              x:Name="MinimizeToTrayCheckBox"
              Content="Minimize to system tray when minimized"
              Margin="0,0,0,12"
              FontSize="13"
              Checked="Settings_Changed"
              Unchecked="Settings_Changed"
            />
            <CheckBox
              x:Name="CloseToTrayCheckBox"
              Content="Minimize to tray when closing window"
              Margin="0,0,0,12"
              FontSize="13"
              Checked="Settings_Changed"
              Unchecked="Settings_Changed"
            />

            <Separator Margin="0,10,0,20" Background="{DynamicResource BorderBrush}" />

            <!-- Text Conversion Settings -->
            <TextBlock
              Text="Text Conversion (NEW!)"
              Margin="0,0,0,15"
              FontWeight="Bold"
              FontSize="15"
              Foreground="{DynamicResource PrimaryTextBrush}"
            />

            <TextBlock
              Text="Convert text typed in the wrong language with a keyboard shortcut."
              TextWrapping="Wrap"
              Margin="0,0,0,15"
              FontSize="12"
              Foreground="{DynamicResource SecondaryTextBrush}"
            />

            <Border
              Padding="15"
              Background="{DynamicResource InfoBrush}"
              CornerRadius="4"
              BorderThickness="1"
              BorderBrush="{DynamicResource BorderBrush}"
              Margin="0,0,0,15"
            >
              <StackPanel>
                <TextBlock
                  Text="How to use:"
                  FontWeight="SemiBold"
                  FontSize="13"
                  Margin="0,0,0,8"
                />
                <TextBlock
                  FontSize="12"
                  TextWrapping="Wrap"
                  Foreground="{DynamicResource SecondaryTextBrush}"
                >
                  <Run Text="1. Type text in the wrong language" />
                  <LineBreak />
                  <Run Text="2. Select the text (Ctrl+A for all)" />
                  <LineBreak />
                  <Run Text="3. Press " />
                  <Run FontWeight="Bold" Text="Ctrl+Shift+Space" />
                  <LineBreak />
                  <Run Text="4. Text converts automatically!" />
                </TextBlock>
              </StackPanel>
            </Border>

            <StackPanel Margin="0,0,0,12">
              <TextBlock
                Text="Keyboard Shortcut:"
                FontSize="12"
                FontWeight="SemiBold"
                Margin="0,0,0,5"
              />
              <Border
                Background="{DynamicResource SecondaryRegionBrush}"
                BorderBrush="{DynamicResource BorderBrush}"
                BorderThickness="1"
                CornerRadius="3"
                Padding="10,8"
                HorizontalAlignment="Left"
              >
                <StackPanel Orientation="Horizontal">
                  <TextBlock
                    Text="Ctrl + Shift + Space"
                    FontFamily="Consolas"
                    FontSize="14"
                    FontWeight="Bold"
                    Foreground="{DynamicResource PrimaryBrush}"
                  />
                </StackPanel>
              </Border>
            </StackPanel>

            <TextBlock
              Text="Supported Conversions:"
              FontSize="12"
              FontWeight="SemiBold"
              Margin="0,0,0,5"
            />

            <ItemsControl Margin="0,0,0,12">
              <ItemsControl.ItemTemplate>
                <DataTemplate>
                  <StackPanel Orientation="Horizontal" Margin="0,3">
                    <TextBlock
                      Text="•"
                      Margin="0,0,5,0"
                      Foreground="{DynamicResource SuccessBrush}"
                    />
                    <TextBlock
                      Text="{Binding}"
                      FontSize="12"
                      Foreground="{DynamicResource SecondaryTextBrush}"
                    />
                  </StackPanel>
                </DataTemplate>
              </ItemsControl.ItemTemplate>
              <ItemsControl.Items>
                <system:String xmlns:system="clr-namespace:System;assembly=mscorlib"
                  >English ↔ Persian/Farsi</system:String
                >
                <system:String xmlns:system="clr-namespace:System;assembly=mscorlib"
                  >English ↔ Arabic</system:String
                >
                <system:String xmlns:system="clr-namespace:System;assembly=mscorlib"
                  >English ↔ Russian</system:String
                >
              </ItemsControl.Items>
            </ItemsControl>

            <Button
              x:Name="TestConversionButton"
              Content="Text Conversion Guide"
              Padding="15,4"
              Style="{StaticResource ButtonSuccess}"
              Click="TestConversion_Click"
              Margin="0,5,0,0"
              ToolTip="Click to open a test window where you can try the text conversion feature"
            />

            <TextBlock
              Text="Note: The conversion feature works in any application. Select text and press the shortcut!"
              TextWrapping="Wrap"
              Margin="0,15,0,0"
              FontSize="11"
              FontStyle="Italic"
              Foreground="{DynamicResource SecondaryTextBrush}"
            />

            <Border
              Margin="0,20,0,0"
              Padding="12"
              Background="{DynamicResource InfoBrush}"
              CornerRadius="4"
              BorderThickness="1"
              BorderBrush="{DynamicResource BorderBrush}"
            >
              <StackPanel>
                <TextBlock
                  Text="Tip"
                  FontWeight="Bold"
                  FontSize="13"
                  Margin="0,0,0,5"
                  FontFamily="Segoe UI"
                />
                <TextBlock
                  Text="Double-click the system tray icon to open settings at any time."
                  FontSize="12"
                  TextWrapping="Wrap"
                  Foreground="{DynamicResource SecondaryTextBrush}"
                />
              </StackPanel>
            </Border>
          </StackPanel>
        </ScrollViewer>
      </TabItem>
      <!-- About Tab -->
      <TabItem>
        <TabItem.Header>
          <TextBlock Text="About" FontSize="14" Padding="10,5" />
        </TabItem.Header>
        <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="5">
          <StackPanel Margin="15,20,15,10" HorizontalAlignment="Center" MaxWidth="500">
            <TextBlock
              Text="Keyboard Language Indicator"
              FontSize="24"
              FontWeight="Bold"
              HorizontalAlignment="Center"
              Margin="0,20,0,10"
            />
            <TextBlock
              x:Name="VersionText"
              Text="Version 4.0.0"
              FontSize="14"
              HorizontalAlignment="Center"
              Foreground="{DynamicResource SecondaryTextBrush}"
              Margin="0,0,0,30"
            />
            <Border
              Padding="20"
              Background="{DynamicResource RegionBrush}"
              BorderBrush="{DynamicResource BorderBrush}"
              BorderThickness="1"
              CornerRadius="8"
              Margin="0,0,0,20"
            >
              <StackPanel>
                <TextBlock
                  Text="About This App"
                  FontWeight="Bold"
                  FontSize="16"
                  Margin="0,0,0,10"
                />
                <TextBlock
                  Text="A powerful utility that displays notifications when you switch keyboard languages and intelligently converts mistyped text to the correct layout."
                  TextWrapping="Wrap"
                  FontSize="13"
                  Margin="0,0,0,15"
                  Foreground="{DynamicResource SecondaryTextBrush}"
                />
                <TextBlock Text="Features:" FontWeight="SemiBold" Margin="0,0,0,8" />
                <TextBlock
                  Text="• Real-time language change notifications"
                  Margin="10,0,0,5"
                  FontSize="12"
                />
                <TextBlock
                  Text="• Intelligent text conversion (Ctrl+Shift+Space)"
                  Margin="10,0,0,5"
                  FontSize="12"
                  Foreground="{DynamicResource SuccessBrush}"
                  FontWeight="SemiBold"
                />
                <TextBlock Text="• Cursor follower mode" Margin="10,0,0,5" FontSize="12" />
                <TextBlock
                  Text="• Multi-monitor support with flexible display options"
                  Margin="10,0,0,5"
                  FontSize="12"
                />
                <TextBlock
                  Text="• Customizable colors per language with live preview"
                  Margin="10,0,0,5"
                  FontSize="12"
                />
                <TextBlock
                  Text="• 150+ keyboard layout detection"
                  Margin="10,0,0,5"
                  FontSize="12"
                />
                <TextBlock Text="• Dark mode support" Margin="10,0,0,5" FontSize="12" />
                <TextBlock Text="• System tray integration" Margin="10,0,0,5" FontSize="12" />
                <TextBlock Text="• Automatic updates" Margin="10,0,0,5" FontSize="12" />
              </StackPanel>
            </Border>

            <Border
              Padding="15"
              Background="{DynamicResource SuccessBrush}"
              BorderBrush="{DynamicResource BorderBrush}"
              BorderThickness="1"
              CornerRadius="6"
              Margin="0,0,0,15"
              Opacity="0.15"
            >
              <StackPanel>
                <TextBlock
                  Text="✨ New in Version 4.0!"
                  FontWeight="Bold"
                  FontSize="13"
                  Margin="0,0,0,8"
                  HorizontalAlignment="Center"
                />
                <TextBlock Text="• Intelligent Text Conversion" Margin="5,0,0,3" FontSize="11" />
                <TextBlock Text="• Live Color Preview" Margin="5,0,0,3" FontSize="11" />
                <TextBlock Text="• Notification Toggle Control" Margin="5,0,0,3" FontSize="11" />
                <TextBlock Text="• Enhanced Language Detection" Margin="5,0,0,0" FontSize="11" />
              </StackPanel>
            </Border>

            <Button
              Content="View on GitHub"
              Style="{StaticResource ButtonPrimary}"
              HorizontalAlignment="Center"
              Padding="30,5"
              Margin="0,0,0,10"
              Click="ViewOnGitHub_Click"
            />
            <Button
              x:Name="CheckForUpdatesAboutButton"
              Content="Check for Updates"
              Style="{StaticResource ButtonInfo}"
              HorizontalAlignment="Center"
              Padding="25,5"
              Margin="0,0,0,20"
              Click="CheckForUpdates_Click"
              Width="149"
            />

            <Border
              Padding="12"
              Background="{DynamicResource InfoBrush}"
              CornerRadius="4"
              BorderThickness="1"
              BorderBrush="{DynamicResource BorderBrush}"
              Margin="0,0,0,15"
            >
              <StackPanel>
                <TextBlock
                  Text="⌨️ Quick Shortcuts"
                  FontWeight="Bold"
                  FontSize="12"
                  Margin="0,0,0,5"
                />
                <TextBlock
                  Text="Ctrl+Shift+Space → Convert selected text"
                  FontSize="11"
                  Foreground="{DynamicResource SecondaryTextBrush}"
                  Margin="0,0,0,3"
                />
                <TextBlock
                  Text="Ctrl+Q → Close persistent notifications"
                  FontSize="11"
                  Foreground="{DynamicResource SecondaryTextBrush}"
                />
              </StackPanel>
            </Border>

            <TextBlock
              Text="Licensed under GNU GPL v3.0"
              FontSize="11"
              HorizontalAlignment="Center"
              Foreground="{DynamicResource SecondaryTextBrush}"
              Margin="0,5,0,0"
            />
          </StackPanel>
        </ScrollViewer>
      </TabItem>
    </TabControl>
    <!-- Test Button with proper icon -->
    <Button
      Grid.Row="1"
      HorizontalAlignment="Stretch"
      Height="42"
      Margin="0,10,0,0"
      FontSize="14"
      FontWeight="Medium"
      Style="{StaticResource ButtonSuccess}"
      Click="TestNotification_Click"
    >
      <StackPanel Orientation="Horizontal">
        <TextBlock Text="Show Test Notification" VerticalAlignment="Center" />
      </StackPanel>
    </Button>
  </Grid>
</hc:Window>
